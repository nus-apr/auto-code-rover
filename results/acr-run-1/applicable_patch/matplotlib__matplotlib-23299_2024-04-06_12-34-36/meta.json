{
    "task_id": "matplotlib__matplotlib-23299",
    "setup_info": {
        "repo_path": "/media/media0/yuntong/SWE-bench/testbed/matplotlib__matplotlib/setup_matplotlib__matplotlib__3.5",
        "env_name": "setup_matplotlib__matplotlib__3.5",
        "pre_install": [],
        "install": "python -m pip install -e .",
        "test_cmd": "pytest --no-header -rA --tb=no -p no:cacheprovider lib/matplotlib/tests/test_rcparams.py"
    },
    "task_info": {
        "instance_id": "matplotlib__matplotlib-23299",
        "base_commit": "3eadeacc06c9f2ddcdac6ae39819faa9fbee9e39",
        "hints_text": "My knee-jerk guess is that  :  \r\n\r\n - the `rcParams['backend']` in the auto-sentinel\r\n - that is stashed by rc_context\r\n - if you do the first thing to force the backend to be resolved in the context manager it get changes\r\n - the context manager sets it back to the sentinel an the way out\r\n - `get_backend()` re-resolves the backend which because it changes the backend it closes all of the figures\r\n\r\n\r\nThis is probably been a long standing latent bug, but was brought to the front when we made the backend resolution lazier.",
        "created_at": "2022-06-18T01:34:39Z",
        "test_patch": "diff --git a/lib/matplotlib/tests/test_rcparams.py b/lib/matplotlib/tests/test_rcparams.py\n--- a/lib/matplotlib/tests/test_rcparams.py\n+++ b/lib/matplotlib/tests/test_rcparams.py\n@@ -496,6 +496,13 @@ def test_keymaps():\n         assert isinstance(mpl.rcParams[k], list)\n \n \n+def test_no_backend_reset_rccontext():\n+    assert mpl.rcParams['backend'] != 'module://aardvark'\n+    with mpl.rc_context():\n+        mpl.rcParams['backend'] = 'module://aardvark'\n+    assert mpl.rcParams['backend'] == 'module://aardvark'\n+\n+\n def test_rcparams_reset_after_fail():\n     # There was previously a bug that meant that if rc_context failed and\n     # raised an exception due to issues in the supplied rc parameters, the\n",
        "repo": "matplotlib/matplotlib",
        "problem_statement": "[Bug]: get_backend() clears figures from Gcf.figs if they were created under rc_context\n### Bug summary\r\n\r\ncalling `matplotlib.get_backend()` removes all figures from `Gcf` if the *first* figure in `Gcf.figs` was created in an `rc_context`.\r\n\r\n### Code for reproduction\r\n\r\n```python\r\nimport matplotlib.pyplot as plt\r\nfrom matplotlib import get_backend, rc_context\r\n\r\n# fig1 = plt.figure()  # <- UNCOMMENT THIS LINE AND IT WILL WORK\r\n# plt.ion()            # <- ALTERNATIVELY, UNCOMMENT THIS LINE AND IT WILL ALSO WORK\r\nwith rc_context():\r\n    fig2 = plt.figure()\r\nbefore = f'{id(plt._pylab_helpers.Gcf)} {plt._pylab_helpers.Gcf.figs!r}'\r\nget_backend()\r\nafter = f'{id(plt._pylab_helpers.Gcf)} {plt._pylab_helpers.Gcf.figs!r}'\r\n\r\nassert before == after, '\\n' + before + '\\n' + after\r\n```\r\n\r\n\r\n### Actual outcome\r\n\r\n```\r\n---------------------------------------------------------------------------\r\nAssertionError                            Traceback (most recent call last)\r\n<ipython-input-1-fa4d099aa289> in <cell line: 11>()\r\n      9 after = f'{id(plt._pylab_helpers.Gcf)} {plt._pylab_helpers.Gcf.figs!r}'\r\n     10 \r\n---> 11 assert before == after, '\\n' + before + '\\n' + after\r\n     12 \r\n\r\nAssertionError: \r\n94453354309744 OrderedDict([(1, <matplotlib.backends.backend_qt.FigureManagerQT object at 0x7fb33e26c220>)])\r\n94453354309744 OrderedDict()\r\n```\r\n\r\n### Expected outcome\r\n\r\nThe figure should not be missing from `Gcf`.  Consequences of this are, e.g, `plt.close(fig2)` doesn't work because `Gcf.destroy_fig()` can't find it.\r\n\r\n### Additional information\r\n\r\n_No response_\r\n\r\n### Operating system\r\n\r\nXubuntu\r\n\r\n### Matplotlib Version\r\n\r\n3.5.2\r\n\r\n### Matplotlib Backend\r\n\r\nQtAgg\r\n\r\n### Python version\r\n\r\nPython 3.10.4\r\n\r\n### Jupyter version\r\n\r\nn/a\r\n\r\n### Installation\r\n\r\nconda\n",
        "version": "3.5",
        "FAIL_TO_PASS": [
            "lib/matplotlib/tests/test_rcparams.py::test_no_backend_reset_rccontext"
        ],
        "PASS_TO_PASS": [
            "lib/matplotlib/tests/test_rcparams.py::test_Bug_2543",
            "lib/matplotlib/tests/test_rcparams.py::test_Issue_1713",
            "lib/matplotlib/tests/test_rcparams.py::test_RcParams_class",
            "lib/matplotlib/tests/test_rcparams.py::test_animation_frame_formats",
            "lib/matplotlib/tests/test_rcparams.py::test_axes_titlecolor_rcparams",
            "lib/matplotlib/tests/test_rcparams.py::test_backend_fallback_headless",
            "lib/matplotlib/tests/test_rcparams.py::test_deprecation",
            "lib/matplotlib/tests/test_rcparams.py::test_keymaps",
            "lib/matplotlib/tests/test_rcparams.py::test_legend_colors[different",
            "lib/matplotlib/tests/test_rcparams.py::test_legend_colors[inherited",
            "lib/matplotlib/tests/test_rcparams.py::test_legend_colors[same",
            "lib/matplotlib/tests/test_rcparams.py::test_mec_rcparams",
            "lib/matplotlib/tests/test_rcparams.py::test_mfc_rcparams",
            "lib/matplotlib/tests/test_rcparams.py::test_rcparams",
            "lib/matplotlib/tests/test_rcparams.py::test_rcparams_init",
            "lib/matplotlib/tests/test_rcparams.py::test_rcparams_reset_after_fail",
            "lib/matplotlib/tests/test_rcparams.py::test_rcparams_update",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[100-1000]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[100-1001]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[20.6-20]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[20.6-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[EXPANDED-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[expanded-expanded]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[stretch4-100]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontstretch[stretch7-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[100-1000]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[100-1001]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[20.6-20]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[20.6-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[BOLD-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[bold-bold]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[weight4-100]",
            "lib/matplotlib/tests/test_rcparams.py::test_validate_fontweight[weight7-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_color_or_linecolor-line-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_color_or_linecolor-marker-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-1.23-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-\\xff\\xfed\\x00o\\x00t\\x00t\\x00e\\x00d\\x00-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-aardvark-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-arg65-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-arg67-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-arg68-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-arg69-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-arg70-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[_validate_linestyle-dotted-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_bool--1-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_bool-2-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_bool-aardvark-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_bool-arg3-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_color-(0,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_color-tab:veryblue-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_colorlist-fish-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-1",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-4-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-Cycler(\"linewidth\",",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-arg31-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-arg32-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-cycler(\"bleh,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-cycler(\"waka\",",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-cycler('c',",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-cycler(c=[1,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-cycler(lw=['a',",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-def",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-import",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_cycler-os.system(\"echo",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_floatlist-None-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_floatlist-aardvark-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_floatlist-arg12-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_floatlist-arg13-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_floatlist-arg14-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_hatch---_-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_hatch-8-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_hatch-X-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_hist_bins-aardvark-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_intlist-aardvark-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_intlist-arg10-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_intlist-arg9-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-a-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-abc-TypeError0]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-abc-TypeError1]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg45-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg46-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg47-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg48-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg49-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg50-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg51-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg52-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg53-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg55-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg56-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg57-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg58-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_markevery-arg61-TypeError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_strlist-1-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_strlist-arg4-ValueError]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_strlist-arg6-MatplotlibDeprecationWarning]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_invalid[validate_strlist-arg7-MatplotlibDeprecationWarning]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_color_or_linecolor-linecolor-linecolor]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_color_or_linecolor-markeredgecolor-markeredgecolor]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_color_or_linecolor-markerfacecolor-markerfacecolor]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_color_or_linecolor-mec-markeredgecolor]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_color_or_linecolor-mfc-markerfacecolor]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle------]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle----]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle--.--.]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle--]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-1,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-:-:]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-DoTtEd-dotted]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-None-none]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-arg95-target95]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-arg96-target96]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-arg97-target97]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-arg98-target98]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-dashdot-dashdot]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-dashed-dashed]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-dotted-dotted]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-none-none]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[_validate_linestyle-solid-solid]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-0-False0]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-0-False1]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-1-True0]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-1-True1]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-False-False]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-True-True]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-f-False]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-false-False]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-n-False]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-no-False]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-off-False]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-on-True]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-t-True]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-true-True]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-y-True]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_bool-yes-True]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-(0,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-AABBCC-#AABBCC]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-AABBCC00-#AABBCC00]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-C12-C12]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-None-none]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-arg59-target59]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-arg61-target61]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-none-none]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_color-tab:blue-tab:blue]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_colorlist-arg47-target47]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_colorlist-arg49-target49]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_colorlist-arg50-target50]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_colorlist-arg51-target51]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_colorlist-r,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_colorlist-r,g,b-target46]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_cycler-(cycler(\"color\",",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_cycler-arg36-target36]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_cycler-arg40-target40]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_cycler-arg41-target41]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_cycler-cycler(\"color\",",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_cycler-cycler('c',",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_cycler-cycler(c='rgb',",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_floatlist-1.5,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_floatlist-arg31-target31]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_floatlist-arg32-target32]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_floatlist-arg33-target33]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_floatlist-arg34-target34]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hatch---|---|]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hatch--]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hatch-/+*/.x-/+*/.x]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hatch-\\\\oO-\\\\oO]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hist_bins-1,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hist_bins-10-10]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hist_bins-arg71-target71]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hist_bins-arg72-target72]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hist_bins-auto-auto]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_hist_bins-fd-fd]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_intlist-1,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_intlist-arg26-target26]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_intlist-arg27-target27]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_intlist-arg28-target28]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_intlist-arg29-target29]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-0.1-0.1]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-1-1]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-None-None]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-arg76-target76]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-arg77-target77]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-arg78-target78]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-arg79-target79]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_markevery-arg80-target80]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist--target16]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist-a,b-target17]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist-aardvark,",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist-aardvark-target18]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist-arg21-target21]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist-arg22-target22]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist-arg23-target23]",
            "lib/matplotlib/tests/test_rcparams.py::test_validator_valid[validate_strlist-arg24-target24]"
        ],
        "environment_setup_commit": "de98877e3dc45de8dd441d008f23d88738dc015d",
        "patch": "diff --git a/lib/matplotlib/__init__.py b/lib/matplotlib/__init__.py\n--- a/lib/matplotlib/__init__.py\n+++ b/lib/matplotlib/__init__.py\n@@ -1059,6 +1059,8 @@ def rc_context(rc=None, fname=None):\n     \"\"\"\n     Return a context manager for temporarily changing rcParams.\n \n+    The :rc:`backend` will not be reset by the context manager.\n+\n     Parameters\n     ----------\n     rc : dict\n@@ -1087,7 +1089,8 @@ def rc_context(rc=None, fname=None):\n              plt.plot(x, y)  # uses 'print.rc'\n \n     \"\"\"\n-    orig = rcParams.copy()\n+    orig = dict(rcParams.copy())\n+    del orig['backend']\n     try:\n         if fname:\n             rc_file(fname)\n",
        "pr_link": "https://github.com/matplotlib/matplotlib/pull/23299"
    }
}